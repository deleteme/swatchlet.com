{"version":3,"file":"bundle.js","sources":["../node_modules/svelte/internal/index.mjs","../node_modules/svelte/store/index.mjs","../src/lib/is-type-equal.js","../src/lib/is-strictly-equal.js","../src/lib/is-equal-within.js","../src/lib/is-shallow-equal.js","../src/lib/are-array-values-shallow-equal.js","../src/memoize.js","../src/url-helpers.js","../src/lib/constants.js","../src/lib/hex-to-rgb.js","../src/store.js","../src/lib/rgb-string-to-components.js","../src/breakpoint-store.js","../src/ButtonLink.svelte","../src/Button.svelte","../src/lib/get-high-contrast-color.js","../src/Swatch.svelte","../src/Swatches.svelte","../src/AddNewColor.svelte","../src/picker-canvas-store.js","../src/lib/rgb-to-hex.js","../node_modules/svelte/easing/index.mjs","../node_modules/svelte/motion/index.mjs","../src/PrimaryCursor.svelte","../src/PinnedCursor.svelte","../src/lib/trap.js","../src/PickerCanvas.svelte","../src/PinnedRadios.svelte","../node_modules/svelte/transition/index.mjs","../src/Modal.svelte","../src/Picker.svelte","../src/lib/delay.js","../src/lib/is-valid-hex.js","../src/App.svelte","../node_modules/lodash.throttle/index.js","../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (!store || typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, callback) {\n    const unsub = store.subscribe(callback);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, fn) {\n    return definition[1]\n        ? assign({}, assign(ctx.$$scope.ctx, definition[1](fn ? fn(ctx) : {})))\n        : ctx.$$scope.ctx;\n}\nfunction get_slot_changes(definition, ctx, changed, fn) {\n    return definition[1]\n        ? assign({}, assign(ctx.$$scope.changed || {}, definition[1](fn ? fn(changed) : {})))\n        : ctx.$$scope.changed || {};\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nlet running = false;\nfunction run_tasks() {\n    tasks.forEach(task => {\n        if (!task[0](now())) {\n            tasks.delete(task);\n            task[1]();\n        }\n    });\n    running = tasks.size > 0;\n    if (running)\n        raf(run_tasks);\n}\nfunction clear_loops() {\n    // for testing...\n    tasks.forEach(task => tasks.delete(task));\n    running = false;\n}\nfunction loop(fn) {\n    let task;\n    if (!running) {\n        running = true;\n        raf(run_tasks);\n    }\n    return {\n        promise: new Promise(fulfil => {\n            tasks.add(task = [fn, fulfil]);\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    // eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group) {\n    const value = [];\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.push(group[i].__value);\n    }\n    return value;\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            for (let j = 0; j < node.attributes.length; j += 1) {\n                const attribute = node.attributes[j];\n                if (!attributes[attribute.name])\n                    node.removeAttribute(attribute.name);\n            }\n            return nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    if (value != null || input.value) {\n        input.value = value;\n    }\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\nfunction add_resize_listener(element, fn) {\n    if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n    }\n    const object = document.createElement('object');\n    object.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n    object.setAttribute('aria-hidden', 'true');\n    object.type = 'text/html';\n    object.tabIndex = -1;\n    let win;\n    object.onload = () => {\n        win = object.contentDocument.defaultView;\n        win.addEventListener('resize', fn);\n    };\n    if (/Trident/.test(navigator.userAgent)) {\n        element.appendChild(object);\n        object.data = 'about:blank';\n    }\n    else {\n        object.data = 'about:blank';\n        element.appendChild(object);\n    }\n    return {\n        cancel: () => {\n            win && win.removeEventListener && win.removeEventListener('resize', fn);\n            element.removeChild(object);\n        }\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nclass HtmlTag {\n    constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n    }\n    m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(target, this.n[i], anchor);\n        }\n        this.t = target;\n    }\n    u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nlet stylesheet;\nlet active = 0;\nlet current_rules = {};\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    if (!current_rules[name]) {\n        if (!stylesheet) {\n            const style = element('style');\n            document.head.appendChild(style);\n            stylesheet = style.sheet;\n        }\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    node.style.animation = (node.style.animation || '')\n        .split(', ')\n        .filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    )\n        .join(', ');\n    if (name && !--active)\n        clear_rules();\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        let i = stylesheet.cssRules.length;\n        while (i--)\n            stylesheet.deleteRule(i);\n        current_rules = {};\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nfunction flush() {\n    const seen_callbacks = new Set();\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (dirty_components.length) {\n            const component = dirty_components.shift();\n            set_current_component(component);\n            update(component.$$);\n        }\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                callback();\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update($$.dirty);\n        run_all($$.before_update);\n        $$.fragment && $$.fragment.p($$.dirty, $$.ctx);\n        $$.dirty = null;\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = key && { [key]: value };\n        const child_ctx = assign(assign({}, info.ctx), info.resolved);\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = { [info.value]: promise };\n    }\n}\n\nconst globals = (typeof window !== 'undefined' ? window : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(changed, child_ctx);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction measure(blocks) {\n    const rects = {};\n    let i = blocks.length;\n    while (i--)\n        rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n    return rects;\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += \" \" + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += \" \" + name;\n        }\n        else if (value != null) {\n            str += \" \" + name + \"=\" + JSON.stringify(String(value)\n                .replace(/\"/g, '&#34;')\n                .replace(/'/g, '&#39;'));\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    if (has_prop(component.$$.props, name)) {\n        name = component.$$.props[name] || name;\n        component.$$.bound[name] = callback;\n        callback(component.$$.ctx[name]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = {};\n    }\n}\nfunction make_dirty(component, key) {\n    if (!component.$$.dirty) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty = blank_object();\n    }\n    component.$$.dirty[key] = true;\n}\nfunction init(component, options, instance, create_fragment, not_equal, props) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty: null\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (key, ret, value = ret) => {\n            if ($$.ctx && not_equal($$.ctx[key], $$.ctx[key] = value)) {\n                if ($$.bound[key])\n                    $$.bound[key](value);\n                if (ready)\n                    make_dirty(component, key);\n            }\n            return ret;\n        })\n        : prop_values;\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(children(options.target));\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, detail));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error(`Infinite loop detected`);\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_function, is_promise, listen, listen_dev, loop, loop_guard, measure, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, validate_component, validate_store, xlink_attr };\n","import { safe_not_equal, noop, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe,\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => store.subscribe((value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","export const isTypeEqual = (a, b) => {\n  if (Array.isArray(a) !== Array.isArray(b)) return false;\n  return typeof a === typeof b;\n};\n","export const isStrictlyEqual = (a, b) => a === b;\n","import { isStrictlyEqual } from './is-strictly-equal.js';\n\nexport const isEqualWithin = (a, b) => {\n  return Object.entries(a).every(([aKey, aValue]) => {\n    const bValue = b[aKey];\n    return isStrictlyEqual(aValue, bValue);\n  });\n};\n","import { isTypeEqual } from './is-type-equal.js';\nimport { isStrictlyEqual } from './is-strictly-equal.js';\nimport { isEqualWithin } from './is-equal-within.js';\n\nexport const isShallowEqual = (a, b) => {\n  if (isStrictlyEqual(a, b)) return true;\n\n  if (isTypeEqual(a, b)) {\n    if (typeof a === 'object') {\n      return isEqualWithin(a, b) && isEqualWithin(b, a);\n    } else {\n      return isStrictlyEqual(a, b);\n    }\n  }\n  return false;\n};\n","import { isShallowEqual } from './is-shallow-equal.js';\n\nexport const areArrayValuesShallowEqual = (array1, array2) => {\n  if (array1.length !== array2.length) {\n    return false;\n  } else {\n    return array1.every((value, i) => {\n      return isShallowEqual(value, array2[i]);\n    });\n  }\n};\n","import { areArrayValuesShallowEqual } from './lib/are-array-values-shallow-equal.js';\n\nconst cache = { calls: new WeakMap(), hits: new WeakMap() };\nconst track = (weakmap, fn) => {\n  const count = weakmap.get(fn) || 0;\n  weakmap.set(fn, count + 1);\n};\n\nconst log = fn => {\n  const calls = cache.calls.get(fn);\n  const hits = cache.hits.get(fn);\n  const misses = cache.calls.get(fn) - cache.hits.get(fn);\n  const percentage = n => {\n    return (n * 100).toFixed(1) + '%';\n  };\n  console.table([\n    {\n      function: fn,\n      'hit rate': percentage(hits / calls),\n      'miss rate': percentage(misses / calls),\n      calls,\n      hits,\n      misses\n    }\n  ]);\n};\n\nexport function memoize(fn, enableLog) {\n  cache.calls.set(fn, 0);\n  cache.hits.set(fn, 0);\n  let previousArgs = [];\n  let previousValue;\n\n  return function memoized() {\n    track(cache.calls, fn);\n    const args = [...arguments];\n    if (areArrayValuesShallowEqual(previousArgs, args)) {\n      track(cache.hits, fn);\n      //if (enableLog) log(fn);\n      return previousValue;\n    } else {\n      if (enableLog)\n        console.log(\n          fn,\n          'miss!\\n  previousArgs',\n          previousArgs,\n          '\\n  !== args',\n          args\n        );\n      const value = fn(...args);\n      previousArgs = args;\n      previousValue = value;\n      //if (enableLog) log(fn);\n      return value;\n    }\n  };\n}\n","import { memoize } from './memoize.js';\n\nconst fragmentRegExp = /#(.+)$/;\n\nconst getPickingValue = string => {\n  const match = string.match(/p(\\d)+$/);\n  if (!match) return null;\n  const [_, digits] = match;\n  return digits.length > 0 ? Number(digits) : null;\n};\n\nexport const parseURL = memoize(function _parseURL(url) {\n  const match = url.match(fragmentRegExp);\n  if (!match) return;\n  const [_, paramString] = match;\n  // bail early again\n  if (!paramString || paramString.length === 0) return;\n  const parts = paramString\n    .split(',')\n    .filter(function rejectPickingValue(value) {\n      return !value.startsWith('p');\n    });\n  return {\n    swatches: valuesToSwatches(parts),\n    picking: getPickingValue(paramString)\n  };\n});\n\nconst valuesToSwatches = memoize(function _valuesToSwatches(values) {\n  return values.map(value => ({ value: `#${value}` }));\n});\n\nexport function toString(state) {\n  const { picking, swatches } = state;\n  const parts = swatches.map(({ value }) => value.replace('#', ''));\n  if (picking !== null) {\n    parts.push(`p${picking}`);\n  }\n  return parts.join(',');\n}\n\nexport function renderHash(state) {\n  return `#${toString(state)}`;\n}\n","export const longHex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\nexport const shortHex = /^#?([a-f\\d]{1})([a-f\\d]{1})([a-f\\d]{1})$/i;\n","import { longHex, shortHex } from './constants.js';\n\nexport default function hexToRgb(hex) {\n  let result = shortHex.exec(hex);\n  if (result) {\n    result = result.map(fragment => fragment.repeat(2));\n  } else {\n    result = longHex.exec(hex);\n  }\n  return result\n    ? {\n        R: parseInt(result[1], 16),\n        G: parseInt(result[2], 16),\n        B: parseInt(result[3], 16)\n      }\n    : null;\n}\n","import { writable, derived } from 'svelte/store';\n\nimport { parseURL } from './url-helpers.js';\nimport hexToRgb from './lib/hex-to-rgb.js';\nimport rgbStringToComponents from './lib/rgb-string-to-components.js';\n\nconst initialStateFromURL = parseURL(location.href) || {};\n\nconst defaultState = {\n  swatches: [{ value: '#ffffff' }, { value: '#ff00cc' }],\n  picking: null\n};\n\nexport const swatches = writable(\n  initialStateFromURL.swatches || defaultState.swatches\n);\n\nexport const picking = writable(defaultState.picking);\n\nexport const pick = index => {\n  picking.set(index);\n};\n\nexport const cancelPicking = () => {\n  picking.set(defaultState.picking);\n};\n\nexport const pickingSwatch = derived(\n  [picking, swatches],\n  ([picking, swatches]) => {\n    return swatches[picking] || null;\n  }\n);\n\nexport const pickingSwatchRgb = derived(pickingSwatch, swatch => {\n  var swatchRgb;\n  if (!swatch) return;\n  if (swatch.value.startsWith('#')) {\n    swatchRgb = hexToRgb(swatch.value);\n  } else if (swatch.value.startsWith('rgb')) {\n    swatchRgb = rgbStringToComponents(swatch.value);\n  } else {\n    console.warning('unexpected value for swatch', swatch);\n  }\n  return swatchRgb;\n});\n\nexport const swatchesDimensions = writable({});\n\nswatchesDimensions.subscribe(v => {\n  console.log('swatchesDimensions', v);\n});\n\nexport const swatchesDimensionsIsReady = derived(swatchesDimensions, d => {\n  return (\n    Object.values(d).filter(dimensions => {\n      return dimensions !== null;\n    }).length > 0\n  );\n});\n","export default function rgbStringToComponents(rgbString) {\n  const [R, G, B] = rgbString\n    .replace(/[a-z\\(\\)]/g, '')\n    .split(',')\n    .map(Number);\n  return { R, G, B };\n}\n","import { writable } from 'svelte/store';\n\nconst isMobileMediaQuery = window.matchMedia(\n  '(min-width: 0) and (max-width: 812px)'\n);\n\nexport const isMobile = writable(isMobileMediaQuery.matches);\n\nisMobileMediaQuery.addListener(e => {\n  isMobile.set(e.matches);\n});\n","<script>\n  export let href = '';\n  let klass = '';\n  export { klass as class };\n</script>\n<style>\n  a {\n    align-items: center;\n    align-self: center;\n    background: rgba(0, 0, 0, 0.6);\n    border: 0;\n    border-radius: 15px;\n    color: white;\n    cursor: pointer;\n    display: flex;\n    font-weight: bold;\n    line-height: 30px;\n    padding: 0px 1em;\n  }\n  a:hover {\n    background: black;\n    text-decoration: none;\n  }\n  a:active {\n    transform: translateY(1px);\n  }\n  a:focus {\n    outline: white;\n  }\n</style>\n\n<a\n  {href}\n  class={klass}\n  on:click\n>\n  <slot></slot>\n</a>\n","<script>\n  export let type = 'button';\n  let klass = '';\n  export { klass as class };\n</script>\n<style>\n  button {\n    align-items: center;\n    align-self: center;\n    background: rgba(0, 0, 0, 0.6);\n    border: 0;\n    border-radius: 15px;\n    color: white;\n    cursor: pointer;\n    display: flex;\n    font-weight: bold;\n    margin-bottom: 0;\n    line-height: 30px;\n    padding: 0 1em;\n  }\n  button:hover {\n    background: black;\n  }\n  button:active {\n    transform: translateY(1px);\n  }\n  button:focus {\n    outline: white;\n  }\n</style>\n\n<button\n  {type}\n  class={klass}\n  on:click\n>\n  <slot></slot>\n</button>\n","import hexToRgb from './hex-to-rgb.js';\nexport function isLightColor({ R, G, B }) {\n  const sum = Math.round((R * 299 + G * 587 + B * 114) / 1000);\n  return sum > 128;\n}\n\nexport function getHighContrastColorFromRGB(RGB) {\n  return isLightColor(RGB) ? '#000' : '#FFF';\n}\n\nexport function getHighContrastColorFromHex(hex) {\n  const RGB = hexToRgb(hex);\n  return isLightColor(RGB) ? '#000' : '#FFF';\n}\n","<script>\n  import { onMount, onDestroy } from 'svelte';\n  import { renderHash } from './url-helpers.js';\n  import { isMobile } from './breakpoint-store.js';\n  import ButtonLink from './ButtonLink.svelte';\n  import Button from './Button.svelte';\n  import ActionBar from './ActionBar.svelte';\n  import { pick, swatches, picking, swatchesDimensions } from './store.js';\n  import { getHighContrastColorFromHex } from './lib/get-high-contrast-color.js';\n  export let i;\n  export let value;\n  let isHovering = false;\n  const noop = () => {};\n  const safe = (fn, fallback) => {\n    try {\n      const v = fn();\n      return v;\n    } catch (e) {\n      return fallback;\n    }\n  };\n  $: removeHref = renderHash({\n    swatches: $swatches.filter((s, j) => {\n      return i !== j;\n    })\n  });\n  $: contrastingColor = safe(() => getHighContrastColorFromHex(value), '#000');\n  $: outerBackgroundColor = isHovering ? '' : `background-color: ${value}`;\n  $: valueFontSize = $isMobile ? '10vw' : `calc(100vw / ${$swatches.length} * 0.2)`;\n\n  let element;\n\n  const measure = () => {\n    let { offsetWidth, offsetHeight, offsetLeft, offsetTop } = element;\n    let parentElement = element.parentElement;\n    while (parentElement) {\n      offsetLeft += parentElement.offsetLeft;\n      offsetTop += parentElement.offsetTop;\n      parentElement = parentElement.parentElement;\n    }\n    return { offsetWidth, offsetHeight, offsetLeft, offsetTop };\n  };\n\n  const isAnchor = e => e.target.tagName === 'A';\n  const measureDimensions = () => {\n    $swatchesDimensions = {\n      ...$swatchesDimensions,\n      [i]: measure()\n    };\n  };\n  const handleWindowResize = () => { measureDimensions(); };\n  onMount(measureDimensions);\n  onDestroy(() => {\n    $swatchesDimensions = { ...$swatchesDimensions, [i]: null }\n  });\n\n</script>\n\n<style>\n.swatch {\n  box-sizing: border-box;\n  display: inline-flex;\n  height: 100%;\n  margin: auto;\n  position: relative;\n  width: 100%;\n  border-radius: 3px;\n  user-select: none;\n}\n\n.swatch.swatch-is-hovering:hover {\n  background-color: white;\n}\n\n.swatch:hover :global(.actions) {\n  display: flex;\n  justify-content: flex-end;\n}\n\n:global(.swatch-action) {\n  margin-right: 5px;\n}\n\n.swatch-inner {\n  --gap: 0px;\n  border-radius: 0px;\n  bottom: var(--gap);\n  display: flex;\n  align-items: center;\n  height: calc(100% - var(--gap) * 2);\n  left: var(--gap);\n  justify-content: center;\n  right: var(--gap);\n  top: var(--gap);\n  transition: background 0.5s;\n  width: calc(100% - var(--gap) * 2);\n}\n\n.value {\n  cursor: default;\n  font-weight: bold;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  text-align: center;\n  width: 100%;\n}\n</style>\n\n<window on:resize={handleWindowResize} />\n<div\n  class=\"swatch\" class:swatch-is-hovering={isHovering}\n  style='{outerBackgroundColor}; color: {contrastingColor};'\n  on:click={(e) => { if (!isAnchor(e)) { pick(i) }}}\n  bind:this={element}\n>\n  <div\n    class=\"swatch-inner\"\n    style=\"background-color: {value};\"\n  >\n    <span\n      class=\"value\"\n      style='font-size: {valueFontSize}; color: { contrastingColor }'\n    >{value}</span>\n    {#if !$isMobile}\n      <ActionBar>\n        <ButtonLink href={removeHref} class='swatch-action'>\n          Remove\n        </ButtonLink>\n      </ActionBar>\n    {/if}\n  </div>\n</div>\n","<script>\n  import { swatches } from './store.js';\n  import Swatch from './Swatch.svelte';\n</script>\n\n<style>\n.swatches {\n  bottom: 0;\n  display: flex;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 40px;\n}\n@media screen and (min-width: 0) and (max-width: 812px) {\n  .swatches {\n    flex-direction: column;\n  }\n}\n</style>\n\n<div class='swatches'>\n  {#each $swatches as swatch, i}\n  <Swatch value={swatch.value} i={i} />\n  {/each}\n</div>\n","<script>\n  import { renderHash } from './url-helpers.js';\n  import {swatches} from './store.js';\n  import ButtonLink from './ButtonLink.svelte';\n  $: addHref = renderHash({\n      swatches: [...$swatches, { value: '#ffffff' }]\n    })\n</script>\n\n<ButtonLink href={addHref}>+ Add New Color</ButtonLink>\n","import { writable, derived } from 'svelte/store';\n\nexport const COLOR_MODEL_RGB = 'RGB';\nconst COLOR_MODEL_HSL = 'HSL';\nconst [R, G, B] = COLOR_MODEL_RGB.split('');\nconst [H, S, L] = COLOR_MODEL_HSL.split('');\nexport const RANGES = {\n  R: [0, 255],\n  G: [0, 255],\n  B: [0, 255],\n  H: [0, 360],\n  S: [0, 100],\n  L: [0, 100]\n};\n\nexport const pinned = writable(B);\nexport const colorModel = writable(COLOR_MODEL_RGB);\nexport const width = writable(null);\nexport const height = writable(null);\n\nexport const canvasState = derived(\n  [pinned, colorModel, width, height],\n  ([pinned, colorModel, width, height]) => {\n    return { pinned, colorModel, width, height };\n  }\n);\n\nexport const tracking = writable(null);\n","function componentToHex(c) {\n  var hex = c.toString(16);\n  return hex.length == 1 ? '0' + hex : hex;\n}\n\nexport default function rgbToHex(r, g, b) {\n  return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n","export { identity as linear } from '../internal';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { writable } from '../store';\nimport { now, loop, assign } from '../internal';\nimport { linear } from '../easing';\n\nfunction is_date(obj) {\n    return Object.prototype.toString.call(obj) === '[object Date]';\n}\n\nfunction tick_spring(ctx, last_value, current_value, target_value) {\n    if (typeof current_value === 'number' || is_date(current_value)) {\n        // @ts-ignore\n        const delta = target_value - current_value;\n        // @ts-ignore\n        const velocity = (current_value - last_value) / (ctx.dt || 1 / 60); // guard div by 0\n        const spring = ctx.opts.stiffness * delta;\n        const damper = ctx.opts.damping * velocity;\n        const acceleration = (spring - damper) * ctx.inv_mass;\n        const d = (velocity + acceleration) * ctx.dt;\n        if (Math.abs(d) < ctx.opts.precision && Math.abs(delta) < ctx.opts.precision) {\n            return target_value; // settled\n        }\n        else {\n            ctx.settled = false; // signal loop to keep ticking\n            // @ts-ignore\n            return is_date(current_value) ?\n                new Date(current_value.getTime() + d) : current_value + d;\n        }\n    }\n    else if (Array.isArray(current_value)) {\n        // @ts-ignore\n        return current_value.map((_, i) => tick_spring(ctx, last_value[i], current_value[i], target_value[i]));\n    }\n    else if (typeof current_value === 'object') {\n        const next_value = {};\n        for (const k in current_value)\n            // @ts-ignore\n            next_value[k] = tick_spring(ctx, last_value[k], current_value[k], target_value[k]);\n        // @ts-ignore\n        return next_value;\n    }\n    else {\n        throw new Error(`Cannot spring ${typeof current_value} values`);\n    }\n}\nfunction spring(value, opts = {}) {\n    const store = writable(value);\n    const { stiffness = 0.15, damping = 0.8, precision = 0.01 } = opts;\n    let last_time;\n    let task;\n    let current_token;\n    let last_value = value;\n    let target_value = value;\n    let inv_mass = 1;\n    let inv_mass_recovery_rate = 0;\n    let cancel_task = false;\n    /* eslint-disable @typescript-eslint/no-use-before-define */\n    function set(new_value, opts = {}) {\n        target_value = new_value;\n        const token = current_token = {};\n        if (value == null || opts.hard || (spring.stiffness >= 1 && spring.damping >= 1)) {\n            cancel_task = true; // cancel any running animation\n            last_time = now();\n            last_value = new_value;\n            store.set(value = target_value);\n            return Promise.resolve();\n        }\n        else if (opts.soft) {\n            const rate = opts.soft === true ? .5 : +opts.soft;\n            inv_mass_recovery_rate = 1 / (rate * 60);\n            inv_mass = 0; // infinite mass, unaffected by spring forces\n        }\n        if (!task) {\n            last_time = now();\n            cancel_task = false;\n            task = loop(now => {\n                if (cancel_task) {\n                    cancel_task = false;\n                    task = null;\n                    return false;\n                }\n                inv_mass = Math.min(inv_mass + inv_mass_recovery_rate, 1);\n                const ctx = {\n                    inv_mass,\n                    opts: spring,\n                    settled: true,\n                    dt: (now - last_time) * 60 / 1000\n                };\n                const next_value = tick_spring(ctx, last_value, value, target_value);\n                last_time = now;\n                last_value = value;\n                store.set(value = next_value);\n                if (ctx.settled)\n                    task = null;\n                return !ctx.settled;\n            });\n        }\n        return new Promise(fulfil => {\n            task.promise.then(() => {\n                if (token === current_token)\n                    fulfil();\n            });\n        });\n    }\n    /* eslint-enable @typescript-eslint/no-use-before-define */\n    const spring = {\n        set,\n        update: (fn, opts) => set(fn(target_value, value), opts),\n        subscribe: store.subscribe,\n        stiffness,\n        damping,\n        precision\n    };\n    return spring;\n}\n\nfunction get_interpolator(a, b) {\n    if (a === b || a !== a)\n        return () => a;\n    const type = typeof a;\n    if (type !== typeof b || Array.isArray(a) !== Array.isArray(b)) {\n        throw new Error('Cannot interpolate values of different type');\n    }\n    if (Array.isArray(a)) {\n        const arr = b.map((bi, i) => {\n            return get_interpolator(a[i], bi);\n        });\n        return t => arr.map(fn => fn(t));\n    }\n    if (type === 'object') {\n        if (!a || !b)\n            throw new Error('Object cannot be null');\n        if (is_date(a) && is_date(b)) {\n            a = a.getTime();\n            b = b.getTime();\n            const delta = b - a;\n            return t => new Date(a + t * delta);\n        }\n        const keys = Object.keys(b);\n        const interpolators = {};\n        keys.forEach(key => {\n            interpolators[key] = get_interpolator(a[key], b[key]);\n        });\n        return t => {\n            const result = {};\n            keys.forEach(key => {\n                result[key] = interpolators[key](t);\n            });\n            return result;\n        };\n    }\n    if (type === 'number') {\n        const delta = b - a;\n        return t => a + t * delta;\n    }\n    throw new Error(`Cannot interpolate ${type} values`);\n}\nfunction tweened(value, defaults = {}) {\n    const store = writable(value);\n    let task;\n    let target_value = value;\n    function set(new_value, opts) {\n        if (value == null) {\n            store.set(value = new_value);\n            return Promise.resolve();\n        }\n        target_value = new_value;\n        let previous_task = task;\n        let started = false;\n        let { delay = 0, duration = 400, easing = linear, interpolate = get_interpolator } = assign(assign({}, defaults), opts);\n        const start = now() + delay;\n        let fn;\n        task = loop(now => {\n            if (now < start)\n                return true;\n            if (!started) {\n                fn = interpolate(value, new_value);\n                if (typeof duration === 'function')\n                    duration = duration(value, new_value);\n                started = true;\n            }\n            if (previous_task) {\n                previous_task.abort();\n                previous_task = null;\n            }\n            const elapsed = now - start;\n            if (elapsed > duration) {\n                store.set(value = new_value);\n                return false;\n            }\n            // @ts-ignore\n            store.set(value = fn(easing(elapsed / duration)));\n            return true;\n        });\n        return task.promise;\n    }\n    return {\n        set,\n        update: (fn, opts) => set(fn(target_value, value), opts),\n        subscribe: store.subscribe\n    };\n}\n\nexport { spring, tweened };\n","<script>\n  import { spring } from 'svelte/motion';\n\n  const initialLeft = -1;\n  const initialTop = -1;\n  let transform = '';\n  export let left = initialLeft;\n  export let top = initialTop;\n  const coords = spring({ left: left, top: top }, {\n    stiffness: 0.2,\n    damping: 0.8\n  });\n  $: isUsingDefaults = left === initialLeft || top === initialTop;\n  $: isSettled = $coords.left === left && $coords.top === top;\n  $: initialized = !isUsingDefaults;\n\n  $: {\n    if (!isUsingDefaults) {\n      if (!isSettled) {\n        coords.set({ left: left, top: top });\n      }\n      transform = `transform: translateX(${$coords.left}px) translateY(${$coords.top}px);`;\n    }\n  }\n</script>\n<style>\n.cursor {\n  --size: 45px;\n  --offset: calc((var(--size) - 1px) / -2);\n  background: none;\n  border: 3px solid white;\n  border-radius: 3px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.7);\n  box-sizing: border-box;\n  height: var(--size);\n  position: absolute;\n  width: var(--size);\n  pointer-events: none;\n  left: var(--offset);\n  top: var(--offset);\n}\n</style>\n<div class=\"cursor\" style=\"{transform}\"></div>\n","<script>\n  import { spring } from 'svelte/motion';\n\n  const initialLeft = -1;\n  const initialTop = -1;\n  let transform = '';\n  export let left = initialLeft;\n  export let top = initialTop;\n  export let width = 10;\n  const coords = spring({ left: left, top: top }, {\n    stiffness: 0.2,\n    damping: 0.8\n  });\n  $: isUsingDefaults = left === initialLeft || top === initialTop;\n  $: isSettled = $coords.left === left && $coords.top === top;\n  $: initialized = !isUsingDefaults;\n\n  $: {\n    if (!isUsingDefaults) {\n      if (!isSettled) {\n        coords.set({ left: left, top: top });\n      }\n      transform = `transform: translateX(${$coords.left}px) translateY(${$coords.top}px);`;\n    }\n  }\n</script>\n<style>\n.pinned-cursor {\n  background: none;\n  border: 3px solid white;\n  border-radius: 3px;\n  box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.7);\n  box-sizing: border-box;\n  display: none;\n  height: 7px;\n  left: -3px;\n  position: absolute;\n  pointer-events: none;\n  top: -3px;\n}\n.initialized {\n  display: block;\n}\n</style>\n\n<div\n  class=\"pinned-cursor\"\n  class:initialized={initialized}\n  style=\"{transform} width: {width + (3 * 2)}px;\"\n></div>\n","export default function trap(n) {\n  return Math.max(Math.min(n, 1), 0);\n}\n","<script>\nimport { onMount, onDestroy } from \"svelte\";\nimport { derived } from \"svelte/store\";\nimport {\n  canvasState,\n  COLOR_MODEL_RGB,\n  RANGES,\n  pinned,\n  colorModel,\n  width,\n  height,\n  tracking\n} from \"./picker-canvas-store.js\";\nimport rgbToHex from \"./lib/rgb-to-hex.js\";\nimport { picking, swatches, pickingSwatchRgb } from \"./store\";\nimport PrimaryCursor from \"./PrimaryCursor.svelte\";\nimport PinnedCursor from \"./PinnedCursor.svelte\";\nimport trap from './lib/trap.js';\n\nlet mounted;\nlet elements, contexts;\nlet cursorLeft = -1,\n  cursorTop = -1;\nlet pinnedCursorLeft = -1,\n  pinnedCursorTop = -1,\n  pinnedCursorWidth = 10;\n\nconst rgb = { R: 0, G: 0, B: 0 };\nconst primaryVsPinnedThreshold = 0.65;\n\nconst getAxisFromPinned = () => {\n  const [xAxis, yAxis] = $colorModel.replace($pinned, \"\");\n  return [xAxis, yAxis];\n};\n\nconst getImageDataDimensions = () => {\n  const [xAxis, yAxis] = getAxisFromPinned();\n  const [, width] = RANGES[xAxis];\n  const [, height] = RANGES[yAxis];\n  return [width, height];\n};\n\nconst getPinnedImageDataDimensions = () => {\n  const width = 1;\n  const height = RANGES[$pinned][1];\n  return [width, height];\n};\n\nconst getBuffers = (w, h) => {\n  const buf = new ArrayBuffer(h * w * 4); //imageData.data.length);\n  const buf8 = new Uint8ClampedArray(buf);\n  const data = new Uint32Array(buf);\n  return [buf, buf8, data];\n};\n\nconst renderCanvasSize = () => {\n  elements.mounted.width = $width;\n  elements.mounted.height = $height;\n};\n\nconst renderPrimaryCanvasSize = () => {\n  if ($colorModel === COLOR_MODEL_RGB) {\n    const max = RANGES.R[1]; // 255\n    elements.primary.width = max;\n    elements.primary.height = max;\n  }\n};\n\nconst renderPinnedCanvasSize = () => {\n  if ($colorModel === COLOR_MODEL_RGB) {\n    const max = RANGES[$pinned][1]; // 255\n    elements.pinned.width = 1;\n    elements.pinned.height = max;\n  }\n};\n\nconst render = state => {\n  if (!elements || !contexts || !state.width || !state.height || !state.pickingSwatchRgb) return;\n  const swatchRgb = state.pickingSwatchRgb;\n  renderCanvasSize();\n  renderPrimaryCanvasSize();\n  renderPinnedCanvasSize();\n\n  const a = 255;\n  (function renderPrimaryCanvas() {\n    var x = 0;\n    var y = 0;\n    var index = 0;\n    const [imageDataWidth, imageDataHeight] = getImageDataDimensions();\n    const imageData = contexts.primary.createImageData(\n      imageDataWidth,\n      imageDataHeight\n    );\n    const [xAxis, yAxis] = getAxisFromPinned();\n    const primaryWidth = RANGES[xAxis][1]; // 255\n    const primaryHeight = RANGES[yAxis][1]; // 255\n    const xScale = state.width / primaryWidth;\n    const yScale = state.height / primaryHeight;\n\n    const [buf, buf8, data] = getBuffers(imageDataWidth, imageDataHeight);\n\n    const pinnedValue = swatchRgb[state.pinned];\n    rgb[state.pinned] = pinnedValue;\n    while (y < imageDataHeight) {\n      let yAxisValue = y;\n      rgb[yAxis] = yAxisValue;\n      while (x < imageDataWidth) {\n        let xAxisValue = x;\n\n        rgb[xAxis] = xAxisValue;\n\n        // is little endian\n        data[index] =\n          (a << 24) | // alpha\n          (rgb.B << 16) | // blue\n          (rgb.G << 8) | // green\n          rgb.R;\n\n        // is not little endian\n        //data[y * imageDataWidth + x] =\n        //(rgb.R << 24) | // red\n        //(rgb.G << 16) | // green\n        //(rgb.B << 8) | // blue\n        //a;\n\n        x += 1;\n        index += 1;\n      }\n      x = 0;\n      y += 1;\n    }\n\n    imageData.data.set(buf8);\n    contexts.primary.putImageData(imageData, 0, 0);\n    contexts.mounted.drawImage(\n      elements.primary,\n      0,\n      0,\n      Math.floor(primaryWidth * xScale * primaryVsPinnedThreshold),\n      Math.floor(primaryHeight * yScale)\n    );\n\n    cursorLeft = Math.floor(\n      swatchRgb[xAxis] * xScale * primaryVsPinnedThreshold\n    );\n    cursorTop = Math.floor(swatchRgb[yAxis] * yScale);\n  })();\n\n  (function renderPinnedCanvas() {\n    var y = 0;\n    const [pinnedWidth, pinnedHeight] = getPinnedImageDataDimensions();\n    const imageData = contexts.pinned.createImageData(\n      pinnedWidth,\n      pinnedHeight\n    );\n\n    const yScale = state.height / pinnedHeight;\n    const [buf, buf8, data] = getBuffers(pinnedWidth, pinnedHeight);\n    // create a gradient from one to 255\n    const others = COLOR_MODEL_RGB.replace(state.pinned, \"\").split(\"\");\n    // others will be something like ['R', 'G']\n    rgb[others[0]] = swatchRgb[others[0]];\n    rgb[others[1]] = swatchRgb[others[1]];\n    while (y < pinnedHeight) {\n      rgb[state.pinned] = pinnedHeight - y;\n      data[y] =\n        (a << 24) | // alpha\n        (rgb.B << 16) | // blue\n        (rgb.G << 8) | // green\n        rgb.R;\n      y += 1;\n    }\n\n    imageData.data.set(buf8);\n    contexts.pinned.putImageData(imageData, 0, 0);\n    contexts.mounted.drawImage(\n      elements.pinned,\n      Math.floor($width * primaryVsPinnedThreshold),\n      0,\n      Math.ceil($width * (1 - primaryVsPinnedThreshold)),\n      Math.floor(pinnedHeight * yScale)\n    );\n\n    pinnedCursorLeft = Math.floor($width * primaryVsPinnedThreshold);\n    pinnedCursorWidth = Math.ceil($width * (1 - primaryVsPinnedThreshold));\n    pinnedCursorTop = (RANGES[$pinned][1] - swatchRgb[$pinned]) * yScale;\n  })();\n};\n\nlet unsubscribe;\n\nonMount(() => {\n  elements = {\n    mounted,\n    primary: document.createElement(\"canvas\"),\n    pinned: document.createElement(\"canvas\")\n  };\n  contexts = {\n    mounted: elements.mounted.getContext(\"2d\"),\n    primary: elements.primary.getContext(\"2d\"),\n    pinned: elements.pinned.getContext(\"2d\")\n  };\n\n  const canvasStateWithSwatch = derived(\n    [canvasState, pickingSwatchRgb],\n    ([canvasState, pickingSwatchRgb]) => {\n      return { ...canvasState, pickingSwatchRgb };\n    }\n  );\n  unsubscribe = canvasStateWithSwatch.subscribe(render);\n});\n\nonDestroy(() => {\n  unsubscribe();\n  elements = null;\n  contexts = null;\n});\n\nconst getIsPrimaryCanvasEvent = e => {\n  return e.layerX < $width * primaryVsPinnedThreshold;\n};\n\nconst handleCanvasSwatchEvent = (e, { isPrimaryCanvas }) => {\n  const _rgb = { ...$pickingSwatchRgb };\n  // translate a click into an rgb value\n  if (isPrimaryCanvas) {\n    const [xAxis, yAxis] = getAxisFromPinned();\n    let primaryXMax = RANGES[xAxis][1]; // 255\n    let primaryYMax = RANGES[yAxis][1]; // 255\n    let primaryPxWidth = $width * primaryVsPinnedThreshold;\n    let primaryPxHeight = $height;\n    // how far along into the primary canvas?\n    let xTargetRatio = trap(e.layerX / primaryPxWidth); // 0.3\n    let xTargetComponentValue = Math.round(xTargetRatio * primaryXMax);\n    _rgb[xAxis] = xTargetComponentValue;\n    let yTargetRatio = trap(e.layerY / primaryPxHeight); // 0.4\n    let yTargetComponentValue = Math.round(yTargetRatio * primaryYMax);\n    _rgb[yAxis] = yTargetComponentValue;\n  } else {\n    // it's pinned canvas\n    let pinnedPxHeight = $height;\n    let pinnedYMax = RANGES[$pinned][1]; // 255\n    let yTargetRatio = trap(e.layerY / pinnedPxHeight); // 0.4\n    let yTargetComponentValue =\n      pinnedYMax - Math.round(yTargetRatio * pinnedYMax);\n    _rgb[$pinned] = yTargetComponentValue;\n  }\n  $swatches = $swatches.map((swatch, i) => {\n    if (i === $picking) {\n      return { ...swatch, value: rgbToHex(_rgb.R, _rgb.G, _rgb.B) }\n    } else {\n      return swatch;\n    }\n  });\n}\n\nconst handleCanvasClick = e => {\n  const isPrimaryCanvas = getIsPrimaryCanvasEvent(e);\n  handleCanvasSwatchEvent(e, { isPrimaryCanvas });\n};\n\nconst handleMouseMove = e => {\n  if ($tracking) {\n    handleCanvasSwatchEvent(e, $tracking);\n  }\n};\n\nconst handleMouseDown = (e) => {\n  const isPrimaryCanvas = getIsPrimaryCanvasEvent(e);\n  $tracking = { isPrimaryCanvas };\n};\n\nconst handleMouseUp = e => {\n  if ($tracking) {\n    const _tracking = { ...$tracking };\n    $tracking = null;\n    handleCanvasSwatchEvent(e, _tracking);\n  }\n};\n\nconst handleWindowResize = () => {\n  if (mounted) {\n    $width = mounted.clientWidth;\n    $height = mounted.clientHeight;\n  }\n};\n</script>\n\n<style>\n@media screen and (min-width: 813px) {\n  .picker-canvas {\n    --golden-ratio: 1.618;\n    --side: calc((1 / var(--golden-ratio)) * 100%);\n    --margin: calc((100% - var(--side)) / 2);\n    bottom: var(--margin);\n    height: var(--side);\n    left: var(--margin);\n    right: var(--margin);\n    position: absolute;\n    top: var(--margin);\n    width: var(--side);\n  }\n}\n@media screen and (min-width: 0) and (max-width: 812px) {\n  .picker-canvas {\n    bottom: 30px;\n    left: 30px;\n    right: 30px;\n    position: absolute;\n    top: 33%;\n  }\n}\ncanvas {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  height: 100%;\n  width: 100%;\n}\n</style>\n\n<svelte:window on:resize={handleWindowResize} />\n<div class=\"picker-canvas\">\n  <canvas\n    bind:this={mounted}\n    bind:clientWidth={$width}\n    bind:clientHeight={$height}\n    on:mousedown={handleMouseDown}\n    on:mouseup={handleMouseUp}\n    on:mousemove={handleMouseMove}\n    on:touchstart={handleMouseDown}\n    on:touchend={handleMouseUp}\n    on:touchcancel={handleMouseUp}\n    on:touchmove|preventDefault={handleMouseMove}\n  >\n  </canvas>\n  {#if cursorLeft >= 0 && cursorTop >= 0}\n    <PrimaryCursor left={cursorLeft} top={cursorTop} />\n  {/if}\n  {#if pinnedCursorLeft >= 0 && pinnedCursorTop >= 0}\n    <PinnedCursor left={pinnedCursorLeft} top={pinnedCursorTop} width={pinnedCursorWidth} />\n  {/if}\n</div>\n","<script>\n  import { pinned } from './picker-canvas-store.js';\n  import { pickingSwatchRgb } from './store.js';\n</script>\n\n<style>\nlabel {\n  font-weight: bold;\n}\n@media screen and (min-width: 813px) {\n  div {\n    --golden-ratio: 1.618;\n    --side: calc((1 / var(--golden-ratio)) * 100%);\n    --margin: calc((100% - var(--side)) / 2);\n    box-sizing: border-box;\n    left: calc(var(--side) + var(--margin));\n    line-height: 4rem;\n    padding: 1rem;\n    position: absolute;\n    width: var(--margin);\n    top: var(--margin);\n  }\n}\n@media screen and (min-width: 0) and (max-width: 812px) {\n  div {\n    left: 30px;\n    position: absolute;\n    top: 120px;\n  }\n  label {\n    align-items: center;\n    display: inline-flex;\n    padding-right: 1rem;\n  }\n  input {\n    margin-bottom: 0;\n    margin-right: 0.5rem;\n  }\n  label * {\n    align-self: center;\n  }\n}\n</style>\n\n{#if $pickingSwatchRgb}\n<div>\n  <label>\n    <input type=radio bind:group={$pinned} value='R'>\n    R: { $pickingSwatchRgb.R }\n  </label>\n\n  <label>\n    <input type=radio bind:group={$pinned} value='G'>\n    G: { $pickingSwatchRgb.G }\n  </label>\n\n  <label>\n    <input type=radio bind:group={$pinned} value='B'>\n    B: { $pickingSwatchRgb.B }\n  </label>\n</div>\n{/if}\n","import { cubicInOut, linear, cubicOut } from '../easing';\nimport { is_function, assign } from '../internal';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear }) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut }) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `overflow: hidden;` +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut }) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","<script>\n  import { fly, fade } from 'svelte/transition';\n  import * as easing from 'svelte/easing';\n  export let targetHeight = 0;\n  export let targetWidth = 0;\n  export let background = '';\n  export let dimensions;\n  export let duration1 = 2000;\n  export let duration2 = 1500;\n  export let effectOverlap = 0;\n  export let handleEscapeKey;\n\n  const handleKeyUp = e => {\n    if (e.code === 'Escape') handleEscapeKey();\n  }\n  //$: cachedDimensions = dimensions ? dimensions : cachedDimensions;\n\n  $: transitionSwatchScale = dimensions ? {\n      position: {\n        start: { x: dimensions.offsetLeft, y: dimensions.offsetTop },\n        end: { x: 0, y: 0 },\n      },\n      scale: {\n        start: {\n          x: dimensions.offsetWidth / targetWidth,\n          y: dimensions.offsetHeight / targetHeight\n        },\n        end: { x: 1, y: 1 },\n      }} : null;\n\n  function renderTransformStyles (s, p) {\n    const styles = `\n      transform: scale(${s.x}, ${s.y}) translate(${p.x}px, ${p.y}px);\n      `.trim();\n    return styles;\n  }\n\n  function swatchScale(node, { duration, scale, position, reverse }) {\n    console.log('swatchScale called', { duration, scale, position, reverse });\n    const css = t => {\n      console.log('t', t);\n      //if (reverse) t = 100 - t;\n      t = easing.cubicOut(t);\n      const s = {\n        x: scale.start.x + (Math.abs(scale.start.x - scale.end.x) * t),\n        y: scale.start.y + (Math.abs(scale.start.y - scale.end.y) * t)\n      };\n      const p = {\n        x: Math.abs((position.end.x - position.start.x) * (1 - t)) / s.x,\n        y: Math.abs((position.end.y - position.start.y) * (1 - t)) / s.y\n      };\n      return `${renderTransformStyles(s, p)};`;\n    };\n    return { duration, css };\n  }\n  function swatchScaleOut(node, options) {\n    console.log('swatch scale out called');\n    return swatchScale(node, { ...options, reverse: true });\n  }\n\n  $: overlayStyle = [\n      `width:  ${targetWidth}px`,\n      `height: ${targetHeight}px`,\n      `background: ${background}`\n    ].join('; ')\n</script>\n<style>\n.modal {\n  height: 100%;\n  position: relative;\n  width: 100%;\n  z-index: 1;\n}\n.overlay {\n  left: 0;\n  top: 0;\n  position: absolute;\n  transform-origin: 0px 0px;\n  z-index: 1;\n}\n\n.overlay-overflow {\n  height: 100%;\n  overflow: hidden;\n  position: absolute;\n  width: 100%;\n  z-index: 1;\n}\n</style>\n<svelte:window on:keyup={handleKeyUp}></svelte:window>\n<!--\n    transition:fade\n    transition:swatchScale=\"{{ ...transitionSwatchScale, duration: 2000 }}\"\n    in:swatchScale=\"{{ ...transitionSwatchScale, duration: 2000 }}\"\n    out:swatchScaleOut|local=\"{{ ...transitionSwatchScale, delay: 1500, duration: 2000 }}\"\n-->\n<div class=\"overlay-overflow\">\n  <div\n    style=\"{ overlayStyle }\"\n    class=\"overlay\"\n    in:swatchScale=\"{{ ...transitionSwatchScale, duration: duration1 }}\"\n    out:swatchScaleOut=\"{{ ...transitionSwatchScale, delay: duration2 - effectOverlap, duration: duration1 }}\"\n  >\n  </div>\n  <div\n    class=\"modal\"\n    in:fly=\"{{ delay: duration1 - effectOverlap, duration: duration2, x: targetWidth / 10, y: 0, opacity: 0, easing: easing.quintOut }}\"\n    out:fly=\"{{ delay: 0, duration: duration2, x: targetWidth / 10, y: 0, opacity: 0, easing: easing.quintOut }}\"\n  >\n    <slot></slot>\n  </div>\n</div>\n","<script>\n  import { onDestroy } from 'svelte';\n  import ActionBar from './ActionBar.svelte';\n  import Button from './Button.svelte';\n  import ButtonLink from './ButtonLink.svelte';\n  import PickerCanvas from './PickerCanvas.svelte';\n  import { picking, swatches, cancelPicking, pickingSwatch, swatchesDimensions } from './store.js';\n  import { tracking } from './picker-canvas-store.js';\n  import PinnedRadios from './PinnedRadios.svelte';\n  import { getHighContrastColorFromHex } from './lib/get-high-contrast-color.js';\n  import isValidHex from './lib/is-valid-hex.js';\n  import Modal from './Modal.svelte';\n  import { renderHash } from './url-helpers.js';\n  import delay from './lib/delay.js';\n\n  $: backgroundColor = $swatches[$picking] && $swatches[$picking].value;\n  $: previousBackgroundColor = $swatches[$picking] ? $swatches[$picking].value : previousBackgroundColor;\n  $: background = previousBackgroundColor;\n  $: contrastingColor = getHighContrastColorFromHex(backgroundColor || previousBackgroundColor);\n  $: originElementDimensions = $swatchesDimensions[$picking]\n  $: previousOriginElementDimensions = originElementDimensions || previousOriginElementDimensions;\n\n  export let width = 0;\n  export let height = 0;\n  let value = $pickingSwatch.value;\n  let isOpen = true;\n  const timeScale = 1;\n  const duration1 = 200 * timeScale;\n  const duration2 = 150 * timeScale;\n  const effectOverlap = 50 * timeScale;\n\n  $: {\n    if (isValidHex(value) && $pickingSwatch) {\n      $swatches[$picking].value = value;\n    }\n  }\n\n  $: removeHref = renderHash({\n    swatches: $swatches.filter((s, j) => {\n      return $picking !== j;\n    })\n  });\n\n  let unsub = pickingSwatch.subscribe((swatch) => {\n    if (swatch && swatch.value !== value) {\n      value = swatch.value;\n    }\n  });\n  onDestroy(() => {\n    unsub();\n  });\n\n  const close = () => {\n    isOpen = false;\n    return delay(duration1 + duration2 - effectOverlap + 1);\n  };\n\n  const handleEscapeKey = () => {\n    close().then(cancelPicking);\n  };\n\n  const handleRemoveButton = e => {\n    e.preventDefault();\n    const href = e.target.href;\n    close().then(() => {\n      cancelPicking();\n      location.href = href;\n    });\n  };\n  const handleCloseButton = e => {\n    e.preventDefault();\n    close().then(cancelPicking);\n  };\n</script>\n\n<style>\n.picker {\n  height: 100%;\n  position: relative;\n  width: 100%;\n  transition: background 0.2s;\n  user-select: none;\n}\n.picker.tracking {\n  transition: none;\n}\n.picker :global(.actions) {\n  display: flex;\n  justify-content: flex-end;\n  right: 45px;\n  top: 50px;\n  width: 33%;\n  z-index: 1;\n}\ninput {\n  background: none;\n  border: 0;\n  border-radius: 0;\n  font-size: 4vh;\n  font-weight: bold;\n  left: 45px;\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  top: 45px;\n  width: 6em;\n}\n\ninput:hover, input:focus {\n  border-bottom: 3px solid;\n}\n@media screen and (min-width: 0) and (max-width: 812px) {\n  input {\n    left: 30px;\n  }\n  .picker :global(.actions) {\n    right: 30px;\n    top: 43px;\n  }\n}\n</style>\n\n\n<svelte:head>\n{@html `<style>html { background: ${backgroundColor || previousBackgroundColor} }</style>`}\n</svelte:head>\n{#if isOpen }\n<Modal\n  targetWidth={width}\n  targetHeight={height}\n  dimensions={previousOriginElementDimensions}\n  background={background}\n  duration1={duration1}\n  duration2={duration2}\n  effectOverlap={effectOverlap}\n  handleEscapeKey={handleEscapeKey}\n>\n  <div\n    class=\"picker\"\n    class:tracking={$tracking}\n    style='background: {backgroundColor || previousBackgroundColor}; color: {contrastingColor};'\n  >\n    <input\n      type=\"text\"\n      bind:value={value}\n      style='color: {contrastingColor}; border-color: {contrastingColor};'\n    />\n    <ActionBar>\n      <ButtonLink href={removeHref} class='swatch-action' on:click={handleRemoveButton}>\n        Remove\n      </ButtonLink>\n      <Button on:click={handleCloseButton}>Close</Button>\n    </ActionBar>\n    <PinnedRadios />\n    <PickerCanvas />\n  </div>\n</Modal>\n{/if}\n","export default function delay(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n","import { longHex, shortHex } from './constants.js';\n\nexport default function isValidHex(possibleHex) {\n  return longHex.test(possibleHex) || shortHex.test(possibleHex);\n}\n","<script>\nimport Swatches from './Swatches.svelte';\nimport Header from './Header.svelte';\nimport Picker from './Picker.svelte';\nimport { picking, swatchesDimensionsIsReady } from './store.js';\nlet width = 0;\nlet height = 0;\n$: hasPicker = $picking !== null && $swatchesDimensionsIsReady;\n$: debuggingOutput = JSON.stringify({swatchesDimensionsIsReady: $swatchesDimensionsIsReady, $picking, hasPicker});\n</script>\n\n<style>\n.app {\n  font-family: \"SF Mono\", monospace;\n  height: 100%;\n  width: 100%;\n  position: relative;\n}\n#alive { display: none; }\n:global(body) { padding: 0; }\n</style>\n\n<div class=\"app\" bind:offsetWidth={width} bind:offsetHeight={height}>\n  <Header />\n  <Swatches />\n  {#if hasPicker}\n    <Picker width={width} height={height} />\n  {/if}\n  <span id='alive'>{debuggingOutput}</span>\n</div>\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","import { derived, get } from 'svelte/store';\nimport App from './App.svelte';\nimport { swatches, picking } from './store.js';\nimport { parseURL, toString, renderHash } from './url-helpers.js';\nimport { memoize } from './memoize.js';\nimport { tracking } from './picker-canvas-store.js';\nimport throttle from 'lodash.throttle';\n\nconst syncURLtoState = memoize(function _syncURLtoState(url) {\n  const newState = parseURL(url);\n  if (newState) {\n    swatches.set(newState.swatches);\n    picking.set(newState.picking);\n    return true;\n  }\n});\n\nif (!syncURLtoState(location.href)) {\n  location.hash = toString({\n    swatches: get(swatches),\n    picking: get(picking)\n  });\n}\n\nconst derivedLocationHash = derived(\n  [swatches, picking],\n  ([$swatches, $picking]) => {\n    return renderHash({\n      swatches: $swatches,\n      picking: $picking\n    });\n  }\n);\n\nconst handleDerivedLocationHash = throttle(\n  hash => {\n    if (hash !== location.hash) {\n      location.hash = hash;\n    }\n  },\n  1000,\n  { leading: true, trailing: true }\n);\n\nderivedLocationHash.subscribe(handleDerivedLocationHash);\n\nconst handleHashChange = e => {\n  syncURLtoState(e.newURL);\n};\n\nwindow.addEventListener('hashchange', handleHashChange, false);\n\nexport default new App({ target: document.body });\n"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callback","unsub","unsubscribe","get_store_value","value","_","component_subscribe","component","$$","on_destroy","push","create_slot","definition","ctx","slot_ctx","get_slot_context","$$scope","get_slot_changes","changed","null_to_empty","set_store_value","ret","set","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","stylesheet","running","run_tasks","task","delete","size","loop","promise","Promise","fulfil","add","[object Object]","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","set_input_value","input","set_style","key","important","style","setProperty","add_resize_listener","getComputedStyle","position","object","win","type","tabIndex","onload","contentDocument","defaultView","test","navigator","userAgent","cancel","toggle_class","toggle","classList","HtmlTag","html","this","e","u","i","n","length","t","innerHTML","Array","from","childNodes","d","m","current_component","active","current_rules","create_rule","duration","delay","ease","uid","step","keyframes","p","rule","str","hash","charCodeAt","head","sheet","insertRule","cssRules","animation","delete_rule","split","filter","anim","indexOf","join","deleteRule","set_current_component","get_current_component","Error","onMount","on_mount","onDestroy","bubble","callbacks","slice","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","resolve","update_scheduled","add_render_callback","flush","seen_callbacks","shift","update","pop","has","fragment","dirty","before_update","after_update","wait","then","dispatch","direction","kind","dispatchEvent","detail","createEvent","initCustomEvent","custom_event","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","transition_out","o","null_transition","create_in_transition","params","animation_name","config","cleanup","go","easing","tick","css","start_time","end_time","abort","started","create_out_transition","group","reset","create_component","mount_component","new_on_destroy","map","destroy_component","detaching","make_dirty","init","instance","create_fragment","not_equal","props","parent_component","prop_values","bound","context","Map","ready","hydrate","l","children","intro","SvelteComponent","$destroy","index","splice","subscriber_queue","writable","start","stop","subscribers","new_value","run_queue","s","invalidate","subscriber","derived","stores","initial_value","single","isArray","stores_array","auto","inited","values","pending","sync","result","unsubscribers","isStrictlyEqual","isEqualWithin","entries","every","aKey","aValue","bValue","isShallowEqual","isTypeEqual","areArrayValuesShallowEqual","array1","array2","cache","calls","WeakMap","hits","track","weakmap","count","get","memoize","enableLog","previousValue","previousArgs","args","arguments","console","log","fragmentRegExp","getPickingValue","string","match","digits","Number","parseURL","url","paramString","parts","startsWith","swatches","valuesToSwatches","picking","toString","state","replace","renderHash","longHex","shortHex","hexToRgb","hex","exec","repeat","R","parseInt","G","B","initialStateFromURL","location","href","defaultState","pick","cancelPicking","pickingSwatch","pickingSwatchRgb","swatch","swatchRgb","rgbString","rgbStringToComponents","warning","swatchesDimensions","v","swatchesDimensionsIsReady","dimensions","isMobileMediaQuery","matchMedia","isMobile","matches","klass","addListener","getHighContrastColorFromHex","Math","round","isLightColor","removeHref","$isMobile","valueFontSize","contrastingColor","outerBackgroundColor","isHovering","handleWindowResize","measure","offsetWidth","offsetHeight","offsetLeft","offsetTop","parentElement","isAnchor","tagName","measureDimensions","$swatchesDimensions","$swatches","j","fallback","safe","iterations","addHref","COLOR_MODEL_RGB","RANGES","H","S","L","pinned","colorModel","width","height","canvasState","tracking","componentToHex","rgbToHex","g","cubicOut","f","quintOut","is_date","obj","prototype","call","spring","opts","stiffness","damping","precision","last_time","current_token","last_value","target_value","inv_mass","inv_mass_recovery_rate","cancel_task","token","hard","soft","rate","min","settled","dt","next_value","tick_spring","current_value","delta","velocity","abs","getTime","initialLeft","initialTop","transform","left","top","coords","isUsingDefaults","isSettled","$coords","initialized","trap","max","cursorLeft","cursorTop","pinnedCursorLeft","pinnedCursorTop","pinnedCursorWidth","handleMouseDown","handleMouseUp","handleMouseMove","preventDefault","primaryVsPinnedThreshold","mounted","elements","contexts","rgb","getAxisFromPinned","xAxis","yAxis","$colorModel","$pinned","getBuffers","w","h","buf","ArrayBuffer","Uint8ClampedArray","Uint32Array","render","$width","$height","primary","renderPrimaryCanvasSize","renderPinnedCanvasSize","y","imageDataWidth","imageDataHeight","getImageDataDimensions","imageData","createImageData","primaryWidth","primaryHeight","xScale","yScale","buf8","pinnedValue","yAxisValue","xAxisValue","putImageData","drawImage","floor","pinnedWidth","pinnedHeight","others","ceil","getContext","canvasStateWithSwatch","handleCanvasSwatchEvent","isPrimaryCanvas","_rgb","$pickingSwatchRgb","primaryXMax","primaryYMax","primaryPxWidth","primaryPxHeight","xTargetRatio","layerX","xTargetComponentValue","yTargetRatio","layerY","yTargetComponentValue","pinnedPxHeight","pinnedYMax","$picking","$tracking","getIsPrimaryCanvasEvent","_tracking","clientWidth","clientHeight","fly","opacity","target_opacity","od","overlayStyle","handleKeyUp","transitionSwatchScale","duration1","effectOverlap","duration2","targetWidth","easing.quintOut","swatchScale","scale","reverse","easing.cubicOut","end","trim","renderTransformStyles","swatchScaleOut","targetHeight","background","handleEscapeKey","code","previousOriginElementDimensions","handleRemoveButton","handleCloseButton","backgroundColor","previousBackgroundColor","isOpen","timeScale","$pickingSwatch","close","ms","setTimeout","possibleHex","isValidHex","originElementDimensions","hasPicker","debuggingOutput","$swatchesDimensionsIsReady","JSON","stringify","FUNC_ERROR_TEXT","NAN","symbolTag","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","freeGlobal","global","freeSelf","self","root","Function","objectToString","nativeMax","nativeMin","debounce","func","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","undefined","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","remainingWait","debounced","isInvoking","leadingEdge","toNumber","isObject","clearTimeout","isObjectLike","isSymbol","other","valueOf","isBinary","syncURLtoState","newState","derivedLocationHash","handleDerivedLocationHash","throttle","newURL","body"],"mappings":"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"}